
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Plotting with pandas and matplotlib</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/landing-page.css?v=ca7933c4" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom-toggle-button.css?v=14db4526" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom-text-formatting.css?v=4ef71e6f" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'part1/chapter-04/md/01-basic-plotting';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
    
    
    
    <img src="../../../_static/pythongis-logo.png" class="logo__image only-light" alt=" - Home"/>
    <script>document.write(`<img src="../../../_static/pythongis-logo.png" class="logo__image only-dark" alt=" - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Part I - Python essentials</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Overview and learning goals</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../chapter-01/index.html">1. Getting started</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../chapter-01/nb/0-learning-objectives.html">Learning objectives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chapter-01/nb/00-motivation.html">1.1 Motivation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chapter-01/nb/01-computers-and-programs.html">1.2 Computers and programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chapter-01/nb/02-why-python.html">1.3 Why Python?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chapter-01/nb/03-writing-and-running-python-code.html">1.4 Writing and running Python code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chapter-01/nb/04-using-jupyterlab.html">1.5 Using JupyterLab for writing code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chapter-01/nb/05-quick-start.html">1.6 Quickly getting started (without installing Python)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chapter-01/nb/06-installation.html">1.7 Installing Python and adding libraries</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../chapter-02/index.html">2. Basic programming concepts</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../chapter-02/nb/0-learning-objectives.html">Learning objectives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chapter-02/nb/00-python-basics.html">2.1 Getting started with Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chapter-02/nb/01-lists-and-indices.html">2.2 Lists and indices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chapter-02/nb/02-text-and-numbers.html">2.3 Working with text and numbers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chapter-02/nb/03-for-loops.html">2.4 for loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chapter-02/nb/04-conditional-statements.html">2.5 Conditional statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chapter-02/nb/05-functions.html">2.6 Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chapter-02/nb/06-writing-scripts.html">2.7 Writing script files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chapter-02/nb/07-modules.html">2.8 Loading and using modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chapter-02/nb/08-exercises.html">Exercises</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../chapter-03/index.html">3. Introduction to data analysis</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../chapter-03/nb/0-learning-objectives.html">Learning objectives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chapter-03/nb/00-pandas-basics.html">3.1 Getting started with data analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chapter-03/nb/01-data-manipulation.html">3.2 Common tabular operations in pandas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chapter-03/nb/02-data-analysis.html">3.3 Data wrangling, grouping and aggregation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chapter-03/nb/03-temporal-data.html">3.4 Working with temporal data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../chapter-03/nb/04-exercises.html">Exercises</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../index.html">4. Introduction to data visualization</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../nb/0-learning-objectives.html">Learning objectives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nb/00-plotting-in-python.html">4.1 Plotting in Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nb/01-basic-plotting.html">4.2 Plotting with pandas and matplotlib</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nb/02-subplots.html">4.3 Creating subplots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nb/03-plot-formatting.html">4.4 Effective plot design: line plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nb/04-exercises.html">Exercises</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Part II - Introduction to GIS with Python</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../part2/index.html">Overview and learning goals</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../part2/chapter-05/index.html">5. Getting started</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-05/nb/0-learning-objectives.html">Learning objectives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-05/nb/00-motivation-to-use-python-for-gis.html">5.1 Motivation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-05/nb/01-introduction-to-geographic-data-in-python.html">5.2 Geographic data in Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-05/nb/02-introduction-to-coordinate-reference-systems.html">5.3 Coordinate reference systems</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../part2/chapter-06/index.html">6. Vector data processing</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-06/nb/0-learning-objectives.html">Learning objectives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-06/nb/00-introduction-to-geographic-objects.html">6.1 Representing geographic data in vector format</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-06/nb/01-geodataframe.html">6.2 Introduction to geopandas GeoDataFrames</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-06/nb/02-geometric-operations.html">6.3 Common geometric operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-06/nb/03-coordinate-reference-system.html">6.4 Working with map projections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-06/nb/04-geocoding.html">6.5 Geocoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-06/nb/05-spatial-queries.html">6.6 Selecting data based on spatial relationships</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-06/nb/06-spatial-join.html">6.7 Spatial join</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-06/nb/07-nearest-neighbour.html">6.8 Nearest neighbour analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-06/nb/08-overlay-analysis-with-vector-data.html">6.9 Vector overlay operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-06/nb/09-exercises.html">Exercises</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../part2/chapter-07/index.html">7. Raster data processing</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-07/nb/0-learning-objectives.html">Learning objectives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-07/nb/00-introduction-to-raster-data.html">7.1 Representing geographic data in raster format</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-07/nb/01-data-structures-xarray.html">7.2 Introduction to data structures in xarray</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-07/nb/02-common-raster-operations.html">7.3 Common raster operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-07/nb/03-coordinate-reference-systems-raster.html">7.4 Coordinate reference system management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-07/nb/04-map-algebra.html">7.5 Map algebra</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-07/nb/05-data-cubes.html">7.6 Working with data cubes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-07/nb/06-exercises.html">Exercises</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../part2/chapter-08/index.html">8. Geographic data visualization</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-08/nb/0-learning-objectives.html">Learning objectives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-08/nb/00-introduction-to-geographic-visualization.html">8.1 Introduction to geographic visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-08/nb/01-static-vector-maps.html">8.2 Static maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-08/nb/02-static-raster-maps.html">8.3 Visualizing raster layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-08/nb/03-interactive-maps.html">8.4 Interactive maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-08/nb/04-map-design-principles-and-colors.html">8.5 Designing maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-08/nb/05-exercises.html">Exercises</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../part2/chapter-09/index.html">9. Using online geographic data sources</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-09/nb/0-learning-objectives.html">Learning objectives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-09/nb/00-retrieving-osm-data.html">9.1 Retrieving OpenStreetMap data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-09/nb/01-retrieving-data-from-wfs.html">9.2 Retrieving data from Web Feature Service (WFS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-09/nb/02-retrieving-data-from-wcs.html">9.3 Retrieving data from Web Coverage Service (WCS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-09/nb/03-read-data-from-spatial-databases.html">9.4 Reading data from spatial databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part2/chapter-09/nb/04-exercises.html">Exercises</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Part III - Case studies</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../part3/chapter-10/index.html">10. Spatial interpolation</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../part3/chapter-10/nb/00-introduction-to-spatial-interpolation.html">Introduction to spatial interpolation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part3/chapter-10/nb/01-inverse-distance-weighting.html">Inverse Distance Weighting interpolation with Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part3/chapter-10/nb/02-exercises.html">Exercises</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../part3/chapter-11/index.html">11. Spatial network analysis</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../part3/chapter-11/nb/00-introduction-to-spatial-network-analysis.html">Introduction to spatial network analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part3/chapter-11/nb/02-multimodal-spatial-accessibility-modelling.html">Multimodal spatial accessibility analysis with Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../part3/chapter-11/nb/03-exercises.html">Exercises</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../part3/chapter-12/index.html">12. Watershed analysis</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../part3/chapter-12/nb/00-watershed-analysis-with-pysheds.html">Watershed analysis with pysheds</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../../part3/chapter-13/index.html">13. Conclusions</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../back-matter/appendix-a.html">A. Working effectively in Python</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../back-matter/nb/appendix-0-python-environments.html">A.1 Tips for maintaining Python environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../back-matter/nb/appendix-1-best-practices.html">A.2 Python programming best practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../back-matter/nb/appendix-2-git-github.html">A.3 Version control with using git and GitHub</a></li>









<li class="toctree-l2"><a class="reference internal" href="../../../back-matter/nb/appendix-3-script-files.html">A.4 Using Python script files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../back-matter/nb/appendix-4-testing-and-debugging.html">A.5 Testing and debugging your code</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../back-matter/appendix-b.html">B. Solutions to questions and exercises</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../back-matter/nb/appendix-5-question-solutions.html">B.1 Question solutions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../back-matter/nb/appendix-6-exercise-solutions.html">B.2 Exercise solutions</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Back matter</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../back-matter/nb/acknowledgements.html">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../back-matter/nb/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../back-matter/nb/references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../authors.html">About the authors</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Datasets</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../data/index.html">Data overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../data/noaa-data.html">NOAA Weather data</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/Python-GIS-book/site/edit/main/source/part1/chapter-04/md/01-basic-plotting.md" target="_blank"
   class="btn btn-sm btn-source-edit-button"
   title="Suggest edit"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/part1/chapter-04/md/01-basic-plotting.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Plotting with pandas and matplotlib</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-basic-x-y-plot">Creating a basic x-y plot</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#selecting-plot-data-based-on-date">Selecting plot data based on date</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#basic-plot-formatting">Basic plot formatting</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#further-formatting-the-plot-and-figure">Further formatting the plot and figure</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#changing-the-figure-size">Changing the figure size</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-text-to-the-figure">Adding text to the figure</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#changing-the-axis-ranges">Changing the axis ranges</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-a-legend">Adding a legend</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-modified-example-plot">The modified example plot</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dealing-with-datetime-axes">Dealing with datetime axes</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#question-4-1">Question 4.1</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bar-plots-in-pandas">Bar plots in pandas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#saving-your-plots-as-image-files">Saving your plots as image files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#interactive-plotting-a-teaser">Interactive plotting, a teaser</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#footnotes">Footnotes</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <!-- #region editable=true slideshow={"slide_type": ""} -->
<section class="tex2jax_ignore mathjax_ignore" id="plotting-with-pandas-and-matplotlib">
<h1>Plotting with pandas and matplotlib<a class="headerlink" href="#plotting-with-pandas-and-matplotlib" title="Link to this heading">#</a></h1>
<p>At this point we are familiar with some of the features of <code class="docutils literal notranslate"><span class="pre">pandas</span></code> and explored some very basic data visualizations at the <a class="reference internal" href="../../chapter-03/nb/03-temporal-data.html"><span class="std std-doc">end of Chapter 3</span></a>. Now, we will wade into visualizing our data in more detail, starting by using the built-in plotting options available directly in <code class="docutils literal notranslate"><span class="pre">pandas</span></code>. Much like the case of <code class="docutils literal notranslate"><span class="pre">pandas</span></code> being built upon <code class="docutils literal notranslate"><span class="pre">numpy</span></code>, plotting in <code class="docutils literal notranslate"><span class="pre">pandas</span></code> takes advantage of plotting features from the <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> <a class="footnote-reference brackets" href="#matplotlib" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> plotting library. Plotting in <code class="docutils literal notranslate"><span class="pre">pandas</span></code> provides a basic framework for quickly visualizing our data, but as you’ll see we will need to also use features from <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> for more advanced formatting and to enhance our plots. In particular, we will use features from the the <code class="docutils literal notranslate"><span class="pre">pyplot</span></code> <a class="footnote-reference brackets" href="#pyplot" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a> submodule in <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, which provides MATLAB-like <a class="footnote-reference brackets" href="#matlab" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a> plotting. We will also briefly explore creating interactive plots using the <code class="docutils literal notranslate"><span class="pre">hvplot</span></code> <a class="footnote-reference brackets" href="#hvplot" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a> plotting library, which allows us to produce plots similar to those available in the <code class="docutils literal notranslate"><span class="pre">bokeh</span></code> plotting library <a class="footnote-reference brackets" href="#bokeh" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a> using plotting syntax very similar to that in <code class="docutils literal notranslate"><span class="pre">pandas</span></code>.</p>
<!-- #endregion -->
<!-- #region editable=true slideshow={"slide_type": ""} -->
<section id="creating-a-basic-x-y-plot">
<h2>Creating a basic x-y plot<a class="headerlink" href="#creating-a-basic-x-y-plot" title="Link to this heading">#</a></h2>
<p>The first step for creating a basic x-y plot is to import <code class="docutils literal notranslate"><span class="pre">pandas</span></code> and read in the data we want to plot from a file. We will be using a <code class="docutils literal notranslate"><span class="pre">datetime</span></code> index for our weather observation data as we <a class="reference internal" href="../../chapter-03/nb/03-temporal-data.html"><span class="std std-doc">learned in Chapter 3</span></a>. In this case, however, we’ll include a few additional parameters in order to read the data with a <code class="docutils literal notranslate"><span class="pre">datetime</span></code> index. We will read in the data first and then discuss what happened.</p>
<p>Let’s start by importing the libraries we will need (<code class="docutils literal notranslate"><span class="pre">pandas</span></code> and <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>) and then read in the data.</p>
<!-- #endregion -->
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="n">fp</span> <span class="o">=</span> <span class="s2">&quot;data/029740.txt&quot;</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
    <span class="n">fp</span><span class="p">,</span>
    <span class="n">sep</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;\s+&quot;</span><span class="p">,</span>
    <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;**&quot;</span><span class="p">,</span> <span class="s2">&quot;***&quot;</span><span class="p">,</span> <span class="s2">&quot;****&quot;</span><span class="p">,</span> <span class="s2">&quot;*****&quot;</span><span class="p">,</span> <span class="s2">&quot;******&quot;</span><span class="p">],</span>
    <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;YR--MODAHRMN&quot;</span><span class="p">,</span> <span class="s2">&quot;TEMP&quot;</span><span class="p">,</span> <span class="s2">&quot;MAX&quot;</span><span class="p">,</span> <span class="s2">&quot;MIN&quot;</span><span class="p">],</span>
    <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;YR--MODAHRMN&quot;</span><span class="p">],</span>
    <span class="n">index_col</span><span class="o">=</span><span class="s2">&quot;YR--MODAHRMN&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>So, let us now examining what is different here compared to files read in Chapter 3. There are two significant changes in the form of two new parameters: <code class="docutils literal notranslate"><span class="pre">parse_dates</span></code> and <code class="docutils literal notranslate"><span class="pre">index_col</span></code>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">parse_dates</span></code> takes a Python list of column name(s) for data file columns that contain date data and <code class="docutils literal notranslate"><span class="pre">pandas</span></code> will parse and convert data in these column(s) to the <code class="docutils literal notranslate"><span class="pre">datetime</span></code> data type. For many common date formats <code class="docutils literal notranslate"><span class="pre">pandas</span></code> will automatically recognize and convert the date data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index_col</span></code> is used to state a column that should be used to index the data in the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>. In this case, we end up with our date data as the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> index. This is a very useful feature in <code class="docutils literal notranslate"><span class="pre">pandas</span></code> as we will see below.</p></li>
</ul>
<p>Having read in the data file, we can now have a quick look at what we have using <code class="docutils literal notranslate"><span class="pre">data.head()</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<p>As mentioned above, you can now see that the index column for our <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> (the first column) contains date values related to each row in the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>. With this we are already able to create our first plot using <code class="docutils literal notranslate"><span class="pre">pandas</span></code>. We will start by using the basic line plot in <code class="docutils literal notranslate"><span class="pre">pandas</span></code> to visualize at our temperature data.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<p><em><strong>Figure 4.3</strong>. A basic plot of the example temperature data using Matplotlib.</em></p>
<p>Now, let’s break down what just happened. First, we first created the plot object using the <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> method of the <code class="docutils literal notranslate"><span class="pre">data</span></code> <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>. Without any parameters given, this makes the plot of all columns in the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> as lines of different color on the y-axis with the index, time in this case, on the x-axis. Second, in case we want to be able to modify the plot or add anything to it after the basic plot has been created, we assign the plot object to the variable <code class="docutils literal notranslate"><span class="pre">ax</span></code>. Why don’t we check its data type below using the <code class="docutils literal notranslate"><span class="pre">type()</span></code> function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
</pre></div>
</div>
<p>OK, so this is a data type we have not seen previously, but clearly it is part of <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>. In case you were skeptical before, we now have evidence that <code class="docutils literal notranslate"><span class="pre">pandas</span></code> is using <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> for generating plots.</p>
<section id="selecting-plot-data-based-on-date">
<h3>Selecting plot data based on date<a class="headerlink" href="#selecting-plot-data-based-on-date" title="Link to this heading">#</a></h3>
<p>Now we can make a few small changes to our plot to further explore plotting with <code class="docutils literal notranslate"><span class="pre">pandas</span></code>. We can begin by plotting only the observed temperatures in the <code class="docutils literal notranslate"><span class="pre">data['TEMP']</span></code> column. In addition, we can restrict ourselves to observations from only the afternoon of October 1, 2019 (the last day in this data set). We will do this by first creating a <code class="docutils literal notranslate"><span class="pre">pandas</span></code> <code class="docutils literal notranslate"><span class="pre">Series</span></code> for only the desired data column and restricting the date of interest. Once we have created the new <code class="docutils literal notranslate"><span class="pre">pandas</span></code> <code class="docutils literal notranslate"><span class="pre">Series</span></code> we can plot the results.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create basic plot with subset of data</span>
<span class="n">oct1_temps</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;TEMP&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="s2">&quot;201910011200&quot;</span><span class="p">]</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">oct1_temps</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<p><em><strong>Figure 4.4</strong>. A plot of the example temperature data for the afternoon of October 1, 2019.</em></p>
<p>So, what did we change this time? First, we selected only the <code class="docutils literal notranslate"><span class="pre">'TEMP'</span></code> column from the <code class="docutils literal notranslate"><span class="pre">data</span></code> <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> by using <code class="docutils literal notranslate"><span class="pre">data['TEMP']</span></code> instead of <code class="docutils literal notranslate"><span class="pre">data</span></code>. Second, we added a restriction to the date range using <code class="docutils literal notranslate"><span class="pre">.loc[]</span></code> to select only rows where the index value <code class="docutils literal notranslate"><span class="pre">data.index</span></code> is greater than <code class="docutils literal notranslate"><span class="pre">'201910011200'</span></code>. In that case, the number in the string is in the format <code class="docutils literal notranslate"><span class="pre">'YYYYMMDDHHMM'</span></code>, where <code class="docutils literal notranslate"><span class="pre">YYYY</span></code> is the year, <code class="docutils literal notranslate"><span class="pre">MM</span></code> is the month, <code class="docutils literal notranslate"><span class="pre">DD</span></code> is the day, <code class="docutils literal notranslate"><span class="pre">HH</span></code> is the hour, and <code class="docutils literal notranslate"><span class="pre">MM</span></code> is the minute. This will result in temperatures only from noon onward on October 1, 2019. Finally, by saving this selection to the variable <code class="docutils literal notranslate"><span class="pre">oct1_temps</span></code> we’re able to now use <code class="docutils literal notranslate"><span class="pre">oct1_temps.plot()</span></code> to plot only our selection. As you can see, we are able to easily control the values plotted in <code class="docutils literal notranslate"><span class="pre">pandas</span></code>, but we can do even better.</p>
</section>
</section>
<section id="basic-plot-formatting">
<h2>Basic plot formatting<a class="headerlink" href="#basic-plot-formatting" title="Link to this heading">#</a></h2>
<p>We can control the appearance of our plots, making them look nicer and provide more information by using a few additional plotting options available in <code class="docutils literal notranslate"><span class="pre">pandas</span></code> and/or <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>. Let’s start by changing the line format, adding some axis labels, and adding a title.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Change line and symbol format, and add axis labels/title</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">oct1_temps</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">style</span><span class="o">=</span><span class="s2">&quot;ko--&quot;</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Helsinki-Vantaa temperatures&quot;</span><span class="p">,</span>
    <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span>
    <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Temperature [°F]&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p><em><strong>Figure 4.5</strong>. A plot of the example temperature data with additional formatting, a title, and axis labels.</em></p>
<p>Now we see that our temperature data as a black dashed line with circles indicating the temperature values from the data file. This comes from the additional parameter <code class="docutils literal notranslate"><span class="pre">style='ko--'</span></code>. In this case, <code class="docutils literal notranslate"><span class="pre">k</span></code> tells the <code class="docutils literal notranslate"><span class="pre">oct1_temps.plot()</span></code> function to use black color for the lines and symbols, <code class="docutils literal notranslate"><span class="pre">o</span></code> tells it to show circles at the data points, and <code class="docutils literal notranslate"><span class="pre">--</span></code> says to use a dashed line between points. You can use <code class="docutils literal notranslate"><span class="pre">help(oct1_temps.plot)</span></code> to find out more about formatting plots. We have also added a title using the <code class="docutils literal notranslate"><span class="pre">title</span></code> parameter, and axis labels using the <code class="docutils literal notranslate"><span class="pre">xlabel</span></code> and <code class="docutils literal notranslate"><span class="pre">ylabel</span></code> parameters.</p>
</section>
<section id="further-formatting-the-plot-and-figure">
<h2>Further formatting the plot and figure<a class="headerlink" href="#further-formatting-the-plot-and-figure" title="Link to this heading">#</a></h2>
<p>In addition to labeling the plot axes and adding a title, there are several other common plot attributes one might like to utilize. We briefly present some of the most common plot features here and then demonstrate how they work in a modified example plot below.</p>
<!-- #region -->
<section id="changing-the-figure-size">
<h3>Changing the figure size<a class="headerlink" href="#changing-the-figure-size" title="Link to this heading">#</a></h3>
<p>While the default plot sizes we’re working with are fine, it is often helpful to be able to control the figure size. Fortunately, there is an easy way to change the figure size in <code class="docutils literal notranslate"><span class="pre">pandas</span></code> and <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>. In order to define the figure size, we simply include the <code class="docutils literal notranslate"><span class="pre">figsize</span></code> parameter with a tuple (set of values in normal parentheses) that lists the width and height of the figure (in inches!).</p>
<p>For example, adding the parameter</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
<p>to the <code class="docutils literal notranslate"><span class="pre">ax.plot()</span></code> function will increase the figure size to be 12 inches wide and 6 inches tall.</p>
<p>Note that it is also possible to change the default figure size for all figures in a Jupyter Notebook by importing the <code class="docutils literal notranslate"><span class="pre">pyplot</span></code> module from <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> (i.e., <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">matplotlib.pyplot</span> <span class="pre">as</span> <span class="pre">plt</span></code>)and then defining the default figure size using <code class="docutils literal notranslate"><span class="pre">plt.rcParams['figure.figsize']</span> <span class="pre">=</span> <span class="pre">[12,</span> <span class="pre">6]</span></code>. In this case the figure size should be given as a Python <code class="docutils literal notranslate"><span class="pre">list</span></code>.</p>
<!-- #endregion -->
<!-- #region -->
</section>
<section id="adding-text-to-the-figure">
<h3>Adding text to the figure<a class="headerlink" href="#adding-text-to-the-figure" title="Link to this heading">#</a></h3>
<p>It is also possible to add text that can be displayed on a plot using <code class="docutils literal notranslate"><span class="pre">ax.text()</span></code>. For example,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;201910011800&quot;</span><span class="p">,</span> <span class="mi">42</span>
<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s2">&quot;This is my text.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>would add the text “This is my text.” aligned to the left starting from the date and time 6:00 pm on October 1, 2019 (<code class="docutils literal notranslate"><span class="pre">x=&quot;201910011800&quot;</span></code>) and at temperature <code class="docutils literal notranslate"><span class="pre">y=42</span></code>. Notice that the <code class="docutils literal notranslate"><span class="pre">x</span></code> coordinate is passed as a text following the formatting in the original data.</p>
<!-- #endregion -->
<!-- #region -->
</section>
<section id="changing-the-axis-ranges">
<h3>Changing the axis ranges<a class="headerlink" href="#changing-the-axis-ranges" title="Link to this heading">#</a></h3>
<p>In some cases you may want to plot only a subset of the data you are working with. You can modify the range of values that are plotted by definiing the axis ranges. Changing the plot axes can be done using the <code class="docutils literal notranslate"><span class="pre">xlim</span></code> and <code class="docutils literal notranslate"><span class="pre">ylim</span></code> parameters of the <code class="docutils literal notranslate"><span class="pre">.vplot()</span></code> function, where <code class="docutils literal notranslate"><span class="pre">xmin</span></code> is the minimum bound of the x-axis, <code class="docutils literal notranslate"><span class="pre">xmax</span></code> is the maximum bound, and the same goes for the y-axis with <code class="docutils literal notranslate"><span class="pre">ymin</span></code> and <code class="docutils literal notranslate"><span class="pre">ymax</span></code>. For example, adding</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="o">...</span>
    <span class="n">xlim</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;201910011500&quot;</span><span class="p">,</span> <span class="s2">&quot;201910012200&quot;</span><span class="p">],</span>
    <span class="n">ylim</span><span class="o">=</span><span class="p">[</span><span class="mi">38</span><span class="p">,</span> <span class="mi">44</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>to the parameter list for <code class="docutils literal notranslate"><span class="pre">ax.plot()</span></code> would change the x-axis range to 3:00 pm to 10:00 pm on October 1, 2019 and the y-axis range to 38 to 44 degrees.</p>
<p>It is also possible to use the <code class="docutils literal notranslate"><span class="pre">datetime</span></code> library to make it somewhat easier to format ranges when defining axis limits. The benefit is that it can be more clear to define dates in the <code class="docutils literal notranslate"><span class="pre">datetime</span></code> format as opposed to a long text string. As an example, we could define the same date ranges as above using the format below. Note that we must first import the <code class="docutils literal notranslate"><span class="pre">datetime</span></code> library before using it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>

<span class="c1"># Use datetime to define axis limits</span>
<span class="n">xmin</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
<span class="n">xmax</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">22</span><span class="p">)</span>

<span class="o">...</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="o">...</span>
    <span class="n">xlim</span><span class="o">=</span><span class="p">[</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>In this case, 3:00 pm on October 1, 2019 is defined by <code class="docutils literal notranslate"><span class="pre">datetime(2019,</span> <span class="pre">10,</span> <span class="pre">1,</span> <span class="pre">15)</span></code> using the <code class="docutils literal notranslate"><span class="pre">datetime</span></code> library. In this format we are able to specify a set of comma-separated values for the year, month, day, hour, minute, seconds, and microseconds to define a date. If only year, month, and day are given, <code class="docutils literal notranslate"><span class="pre">datetime</span></code> assumes the time on that day is midnight at the start of the day.</p>
<p>Defining axis ranges this way is handy because it will adjust the range of values shown on the plot, but not alter the source data in any way. This can be quite nice when exploring your data sets.</p>
<!-- #endregion -->
<!-- #region -->
</section>
<section id="adding-a-legend">
<h3>Adding a legend<a class="headerlink" href="#adding-a-legend" title="Link to this heading">#</a></h3>
<p>The final example of a common plot feature we can add is a legend. The legend allows you to provide some additional information about the lines, points, or other features of a plot, and adding a legend is quite simple. To do so, we need to add two things: a <code class="docutils literal notranslate"><span class="pre">label</span></code> parameter in the <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> function that lists the text that should be displayed in the legend, and a call to the <code class="docutils literal notranslate"><span class="pre">.legend()</span></code> function to display the plot legend. For example, adding the following to the plot will add and display a legend.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="o">...</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Observed temperature&quot;</span>
<span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
<p>This would add the label “Observed temperature” to the legend for the line formatted using the <code class="docutils literal notranslate"><span class="pre">ax.plot()</span></code> function. The legend can be displayed by adding <code class="docutils literal notranslate"><span class="pre">ax.legend()</span></code> to the code.</p>
<p>Note that by default the legend will automatically be positioned in the top right corner of a plot, or in a location where it minimizes interference with other plot elements. The location of the legend can be controlled using the <code class="docutils literal notranslate"><span class="pre">loc</span></code> parameter in the call to the <code class="docutils literal notranslate"><span class="pre">.legend()</span></code> function. The <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.legend.html"><code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> documentation</a> <a class="footnote-reference brackets" href="#matplotlib-legend" id="id6" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a> contains more information about how to control the location of the plot legend.</p>
<!-- #endregion -->
</section>
<section id="the-modified-example-plot">
<h3>The modified example plot<a class="headerlink" href="#the-modified-example-plot" title="Link to this heading">#</a></h3>
<p>Based on the additions above (changing the figure size, adding text to the plot, etc.), the modified plot can be generated using the code below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>

<span class="c1"># Use xlim and ylim to define the axis ranges</span>
<span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">22</span><span class="p">)</span>
<span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="mi">38</span><span class="p">,</span> <span class="mi">44</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">oct1_temps</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">style</span><span class="o">=</span><span class="s2">&quot;ko--&quot;</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Helsinki-Vantaa temperatures&quot;</span><span class="p">,</span>
    <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span>
    <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Temperature [°F]&quot;</span><span class="p">,</span>
    <span class="n">xlim</span><span class="o">=</span><span class="p">[</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">],</span>
    <span class="n">ylim</span><span class="o">=</span><span class="p">[</span><span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">],</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Observed temperature&quot;</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
<span class="p">)</span>

<span class="c1"># Add text to plot</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="s2">&quot;201910011800&quot;</span><span class="p">,</span> <span class="mi">42</span>
<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s2">&quot;This is my text.&quot;</span><span class="p">)</span>

<span class="c1"># Display plot legend</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
<p><em><strong>Figure 4.6</strong>. A plot of the example temperature data further modified with additional formatting and reduced axis ranges.</em></p>
<p>As you can see, we now have a more informative plot with only a few changes in the plotting code.</p>
</section>
</section>
<section id="dealing-with-datetime-axes">
<h2>Dealing with datetime axes<a class="headerlink" href="#dealing-with-datetime-axes" title="Link to this heading">#</a></h2>
<p>One issue we will encounter both with placing text on the plot and changing the axis ranges is the <code class="docutils literal notranslate"><span class="pre">datetime</span></code> index for our <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>. In order to do either thing, we need to define x-values using a <code class="docutils literal notranslate"><span class="pre">datetime</span></code> object. The easiest way to do this is to use the <code class="docutils literal notranslate"><span class="pre">pandas</span></code> <code class="docutils literal notranslate"><span class="pre">pd.to_datetime()</span></code> function, which converts a character string date to a <code class="docutils literal notranslate"><span class="pre">datetime</span></code> object. For example, we can convert 13:00 on October 1, 2019 from the character string <code class="docutils literal notranslate"><span class="pre">'201910011300'</span></code> to a <code class="docutils literal notranslate"><span class="pre">datetime</span></code> equivalent by typing</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">&quot;201910011300&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>With this datetime issue in mind, let’s now create a modified version of the plot above. In this plot we can</p>
<ol class="arabic simple">
<li><p>Limit our time range to 12:00 to 15:00 on October 1, 2019</p></li>
<li><p>Only look at temperatures between 40-46° Fahrenheit</p></li>
<li><p>Add text to note the coldest part of the early afternoon</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define dates</span>
<span class="n">start_time</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">&quot;201910011200&quot;</span><span class="p">)</span>
<span class="n">end_time</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">&quot;201910011500&quot;</span><span class="p">)</span>
<span class="n">cold_time</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">&quot;201910011205&quot;</span><span class="p">)</span>

<span class="c1"># Adjust axis limits</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">oct1_temps</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">style</span><span class="o">=</span><span class="s2">&quot;ko--&quot;</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Helsinki-Vantaa temperatures&quot;</span><span class="p">,</span>
    <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span>
    <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Temperature [°F]&quot;</span><span class="p">,</span>
    <span class="n">xlim</span><span class="o">=</span><span class="p">[</span><span class="n">start_time</span><span class="p">,</span> <span class="n">end_time</span><span class="p">],</span>
    <span class="n">ylim</span><span class="o">=</span><span class="p">[</span><span class="mf">40.0</span><span class="p">,</span> <span class="mf">46.0</span><span class="p">],</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Observed temperature&quot;</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
<span class="p">)</span>

<span class="c1"># Add plot text</span>
<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">cold_time</span><span class="p">,</span> <span class="mf">42.0</span><span class="p">,</span> <span class="s2">&quot;&lt;- Coldest temperature in early afternoon&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
<p><em><strong>Figure 4.7</strong>. A plot of the example temperature data further modified with additional formatting and reduced axis ranges.</em></p>
<!-- #region editable=true slideshow={"slide_type": ""} tags=["question"] -->
<section id="question-4-1">
<h3>Question 4.1<a class="headerlink" href="#question-4-1" title="Link to this heading">#</a></h3>
<p>Create a line plot similar to the examples above with the following attributes: (1) Temperature data from 18:00-24:00 on October 1, 2019, (2)
a dotted red line connecting the observations (do not show the data points), (3) a title that reads “Evening temperatures at Helsinki-Vantaa on October 1, 2019”, and (4) a text label indicating the warmest temperature in the evening.</p>
<!-- #endregion -->
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use this cell to enter your solution.</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Solution</span>

<span class="c1"># Define dates</span>
<span class="n">start_time</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">&quot;201910011800&quot;</span><span class="p">)</span>
<span class="n">end_time</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">&quot;201910020000&quot;</span><span class="p">)</span>
<span class="n">warm_time</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">&quot;201910012055&quot;</span><span class="p">)</span>

<span class="c1"># Adjust axis limits</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">oct1_temps</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">style</span><span class="o">=</span><span class="s2">&quot;k--&quot;</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Helsinki-Vantaa temperatures&quot;</span><span class="p">,</span>
    <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span>
    <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Temperature [°F]&quot;</span><span class="p">,</span>
    <span class="n">xlim</span><span class="o">=</span><span class="p">[</span><span class="n">start_time</span><span class="p">,</span> <span class="n">end_time</span><span class="p">],</span>
    <span class="n">ylim</span><span class="o">=</span><span class="p">[</span><span class="mf">35.0</span><span class="p">,</span> <span class="mf">44.0</span><span class="p">],</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Observed temperature&quot;</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
<span class="p">)</span>

<span class="c1"># Add plot text</span>
<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">warm_time</span><span class="p">,</span> <span class="mf">43.0</span><span class="p">,</span> <span class="s2">&quot;Warmest temperature in the evening -&gt;&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="bar-plots-in-pandas">
<h2>Bar plots in pandas<a class="headerlink" href="#bar-plots-in-pandas" title="Link to this heading">#</a></h2>
<p>In addition to line plots, there are many other options for plotting in <code class="docutils literal notranslate"><span class="pre">pandas</span></code>.
Bar plots are one option, which can be used quite similarly to line plots with the addition of the <code class="docutils literal notranslate"><span class="pre">kind=bar</span></code> parameter.
Note that it is easiest to plot our selected time range for a bar plot by selecting the dates in our data <code class="docutils literal notranslate"><span class="pre">Series</span></code> first, rather than adjusting the plot limits. <code class="docutils literal notranslate"><span class="pre">pandas</span></code> sees bar plot data as categorical, so the date range is more difficult to define for x-axis limits. For the y-axis, we can still define its range using the <code class="docutils literal notranslate"><span class="pre">ylim=[ymin,</span> <span class="pre">ymax]</span></code> parameter. Similarly, text placement on a bar plot is more difficult, and most easily done using the index value of the bar where the text should be placed.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">oct1_afternoon</span> <span class="o">=</span> <span class="n">oct1_temps</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">oct1_temps</span><span class="o">.</span><span class="n">index</span> <span class="o">&lt;=</span> <span class="s2">&quot;201910011500&quot;</span><span class="p">]</span>

<span class="c1"># Plot temperature data as a bar plot</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">oct1_afternoon</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Helsinki-Vantaa temperatures&quot;</span><span class="p">,</span>
    <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span>
    <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Temperature [°F]&quot;</span><span class="p">,</span>
    <span class="n">ylim</span><span class="o">=</span><span class="p">[</span><span class="mi">40</span><span class="p">,</span> <span class="mi">46</span><span class="p">],</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Observed temperature&quot;</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
<span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">42.1</span><span class="p">,</span> <span class="s2">&quot;Coldest </span><span class="se">\n</span><span class="s2">temp </span><span class="se">\n</span><span class="s2">v&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
<p><em><strong>Figure 4.8</strong>. A bar plot using pandas with the example temperature data.</em></p>
<p>You can find more about how to format bar charts on the <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.plot.bar.html"><code class="docutils literal notranslate"><span class="pre">pandas</span></code> documentation website</a> <a class="footnote-reference brackets" href="#pandas-docs" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a>.</p>
<!-- #region -->
</section>
<section id="saving-your-plots-as-image-files">
<h2>Saving your plots as image files<a class="headerlink" href="#saving-your-plots-as-image-files" title="Link to this heading">#</a></h2>
<p>Saving plots created using <code class="docutils literal notranslate"><span class="pre">pandas</span></code> can be done in several ways.
The recommendation for use outside of Jupyter Notebooks is to use the <code class="docutils literal notranslate"><span class="pre">plt.savefig()</span></code> function from <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>.
When using <code class="docutils literal notranslate"><span class="pre">plt.savefig()</span></code>, you simply give a list of commands to generate a plot and include <code class="docutils literal notranslate"><span class="pre">plt.savefig()</span></code> with some parameters as the last command in the Python cell.
The file name is required, and the image format will be determined based on the listed file extension.</p>
<p><code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> plots can be saved in a number of useful file formats, including PNG, PDF, and EPS.
PNG is a nice format for raster images, and EPS is probably easiest to use for vector graphics.
Let’s check out an example of how to save our lovely bar plot.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">oct1_afternoon</span> <span class="o">=</span> <span class="n">oct1_temps</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">oct1_temps</span><span class="o">.</span><span class="n">index</span> <span class="o">&lt;=</span> <span class="s2">&quot;201910011500&quot;</span><span class="p">]</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">oct1_afternoon</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Helsinki-Vantaa temperatures&quot;</span><span class="p">,</span>
    <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span>
    <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Temperature [°F]&quot;</span><span class="p">,</span>
    <span class="n">ylim</span><span class="o">=</span><span class="p">[</span><span class="mi">40</span><span class="p">,</span> <span class="mi">46</span><span class="p">],</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Observed temperature&quot;</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
<span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">42.1</span><span class="p">,</span> <span class="s2">&quot;Coldest </span><span class="se">\n</span><span class="s2">temp </span><span class="se">\n</span><span class="s2">v&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="c1"># Write figure to PNG file</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;bar-plot.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The commands above would both plot the figure and save a copy in a raster image titled <code class="docutils literal notranslate"><span class="pre">bar-plot.png</span></code>. If working in the JupyterLab environment, you would see the new plot file in the file browser on the left side of the notebook window.</p>
<p>Just to demonstrate once again, we can save another version of the plot at a higher resolution with a minor change to the plot commands above.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">oct1_afternoon</span> <span class="o">=</span> <span class="n">oct1_temps</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">oct1_temps</span><span class="o">.</span><span class="n">index</span> <span class="o">&lt;=</span> <span class="s2">&quot;201910011500&quot;</span><span class="p">]</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">oct1_afternoon</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Helsinki-Vantaa temperatures&quot;</span><span class="p">,</span>
    <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span>
    <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Temperature [°F]&quot;</span><span class="p">,</span>
    <span class="n">ylim</span><span class="o">=</span><span class="p">[</span><span class="mi">40</span><span class="p">,</span> <span class="mi">46</span><span class="p">],</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Observed temperature&quot;</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
<span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">42.1</span><span class="p">,</span> <span class="s2">&quot;Coldest </span><span class="se">\n</span><span class="s2">temp </span><span class="se">\n</span><span class="s2">v&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="c1"># Write figure to PDF file with 600 dpi resolution</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;bar-plot-hi-res.pdf&quot;</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>
</pre></div>
</div>
<p>This would save the output plot as a PDF file with a resolution of 600 dots per inch.</p>
<!-- #endregion -->
</section>
<section id="interactive-plotting-a-teaser">
<h2>Interactive plotting, a teaser<a class="headerlink" href="#interactive-plotting-a-teaser" title="Link to this heading">#</a></h2>
<p>We have seen in the previous parts of this chapter that there are many ways to configure and visualize data using Python. Up to this point, however, we have focused on static visualizations in Jupyter Notebooks or those saved as images. As you might imagine, there are numerous Python options to also create interactive visualizations that allow those viewing them to dive deeper into the data and explore. Interactive visualizations are increasingly popular online, and here we provide a brief example of how to create an interactive visualization using the data we have already plotted above. In this example, we will be using the <code class="docutils literal notranslate"><span class="pre">hvplot</span></code> library <a class="footnote-reference brackets" href="#hvplot" id="id8" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a>, which we will return to using later in Part 2 of this book.</p>
<p><code class="docutils literal notranslate"><span class="pre">hvplot</span></code> is a high-level plotting package that can accept several different common Python data types and plot them using using the <code class="docutils literal notranslate"><span class="pre">bokeh</span></code> visualization library <a class="footnote-reference brackets" href="#bokeh" id="id9" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a>. The great thing with <code class="docutils literal notranslate"><span class="pre">hvplot</span></code> is that it takes almost no effort to move from plotting in <code class="docutils literal notranslate"><span class="pre">pandas</span></code> to creating interactive plots. We can explore this in the following example.</p>
<p>Let us start by importing the <code class="docutils literal notranslate"><span class="pre">pandas</span></code> submodule of <code class="docutils literal notranslate"><span class="pre">hvplot</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">hvplot.pandas</span>
</pre></div>
</div>
<!-- #region editable=true slideshow={"slide_type": ""} -->
<p>With the submodule imported, we can simply take a slice of data from the <code class="docutils literal notranslate"><span class="pre">data</span></code> <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>, the month of July in 2014 in this example, and create a plot just as we would in <code class="docutils literal notranslate"><span class="pre">pandas</span></code>. The only difference here is that we will use the <code class="docutils literal notranslate"><span class="pre">.hvplot()</span></code> method rather than the <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> method from <code class="docutils literal notranslate"><span class="pre">pandas</span></code>.</p>
<!-- #endregion -->
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">july2014_df</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">data</span><span class="o">.</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="s2">&quot;201407010000&quot;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">index</span> <span class="o">&lt;</span> <span class="s2">&quot;201407310000&quot;</span><span class="p">)]</span>

<span class="n">july2014_df</span><span class="o">.</span><span class="n">hvplot</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Helsinki-Vantaa temperatures&quot;</span><span class="p">,</span>
    <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span>
    <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Temperature [°F]&quot;</span><span class="p">,</span>
    <span class="n">ylim</span><span class="o">=</span><span class="p">[</span><span class="mf">45.0</span><span class="p">,</span> <span class="mf">90.0</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
<!-- #raw editable=true raw_mimetype="" slideshow={"slide_type": ""} tags=["hide-cell"] -->
<p>\adjustimage{max size={0.9\linewidth}{0.9\paperheight}, caption={\emph{\textbf{Figure 4.9}. An interactive plot example using hvPlot.}}, center, nofloat}{../img/hvplot-example.png}
{ \hspace*{\fill} \}</p>
<!-- #endraw -->
<p><em><strong>Figure 4.9</strong>. An interactive plot example using hvPlot.</em></p>
<p>Now we have an interactive line plot where the users can place their mouse cursor above the line to see the plotted values at a given location, zoom in and/or pan the plot to areas of interest, and click on the legend items to hide or display them. And as you can see, <code class="docutils literal notranslate"><span class="pre">hvplot</span></code> makes it very easy to start creating your own interactive plots from a <code class="docutils literal notranslate"><span class="pre">pandas</span></code> <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>.</p>
<p>That is all we will explore for the moment, but you are welcome to have a look at the <a class="reference external" href="https://hvplot.holoviz.org/user_guide/index.html"><code class="docutils literal notranslate"><span class="pre">hvplot</span></code> User Guide</a> <a class="footnote-reference brackets" href="#hvplot-guide" id="id10" role="doc-noteref"><span class="fn-bracket">[</span>8<span class="fn-bracket">]</span></a> to learn more about the types of visualizations available in <code class="docutils literal notranslate"><span class="pre">hvplot</span></code> and how to use them.</p>
<!-- #region editable=true slideshow={"slide_type": ""} -->
</section>
<section id="footnotes">
<h2>Footnotes<a class="headerlink" href="#footnotes" title="Link to this heading">#</a></h2>
<!-- #endregion -->
<hr class="footnotes docutils" />
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="matplotlib" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://matplotlib.org/">https://matplotlib.org/</a></p>
</aside>
<aside class="footnote brackets" id="pyplot" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://matplotlib.org/api/pyplot_api.html">https://matplotlib.org/api/pyplot_api.html</a></p>
</aside>
<aside class="footnote brackets" id="matlab" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">3</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://www.mathworks.com/products/matlab.html">https://www.mathworks.com/products/matlab.html</a></p>
</aside>
<aside class="footnote brackets" id="hvplot" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id4">1</a>,<a role="doc-backlink" href="#id8">2</a>)</span>
<p><a class="reference external" href="https://hvplot.holoviz.org/">https://hvplot.holoviz.org/</a></p>
</aside>
<aside class="footnote brackets" id="bokeh" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id5">1</a>,<a role="doc-backlink" href="#id9">2</a>)</span>
<p><a class="reference external" href="https://docs.bokeh.org/en/latest/index.html">https://docs.bokeh.org/en/latest/index.html</a></p>
</aside>
<aside class="footnote brackets" id="matplotlib-legend" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id6">6</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.legend.html">https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.legend.html</a></p>
</aside>
<aside class="footnote brackets" id="pandas-docs" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id7">7</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.plot.bar.html">https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.plot.bar.html</a></p>
</aside>
<aside class="footnote brackets" id="hvplot-guide" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id10">8</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://hvplot.holoviz.org/user_guide/index.html">https://hvplot.holoviz.org/user_guide/index.html</a></p>
</aside>
</aside>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "Python-GIS-book/site",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./part1/chapter-04/md"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-basic-x-y-plot">Creating a basic x-y plot</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#selecting-plot-data-based-on-date">Selecting plot data based on date</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#basic-plot-formatting">Basic plot formatting</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#further-formatting-the-plot-and-figure">Further formatting the plot and figure</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#changing-the-figure-size">Changing the figure size</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-text-to-the-figure">Adding text to the figure</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#changing-the-axis-ranges">Changing the axis ranges</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-a-legend">Adding a legend</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-modified-example-plot">The modified example plot</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dealing-with-datetime-axes">Dealing with datetime axes</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#question-4-1">Question 4.1</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bar-plots-in-pandas">Bar plots in pandas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#saving-your-plots-as-image-files">Saving your plots as image files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#interactive-plotting-a-teaser">Interactive plotting, a teaser</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#footnotes">Footnotes</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Henrikki Tenkanen, Vuokko Heikinheimo, David Whipp
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2020-2025, Henrikki Tenkanen, Vuokko Heikinheimo, David Whipp.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>